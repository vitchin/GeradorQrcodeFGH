<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de QR Code</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4">
</head>
<body class="w-full p-4 sm:p-20 flex flex-col items-center justify-center bg-white font-sans">
    <form class="container max-w-[600px] w-full shadow-lg border border-gray-300 rounded-lg flex flex-col items-center justify-center" id="qrForm">
        <h1 class="mb-4 p-[20px] rounded-top bg-blue-500 text-white w-full text-4xl text-center font-bold" style="border-top-right-radius: 8px; border-top-left-radius: 8px;">GERAR QRCODE</h1>
        
        <div class="w-full px-4">
            <label class="font-bold text-base">Equipamento/Ativo/Serviços</label>
            <input id="equipamento" type="text" placeholder="Equipamento/Ativos/Serviços..." class="w-full h-12 text-[18px] border border-gray-300 rounded-lg p-2 mb-4" />
        </div>
        <div class="w-full px-4">
            <label class="font-bold text-base">Data</label>
            <input id="data" type="date" class="w-full h-12 text-[18px] border border-gray-300 rounded-lg p-2 mb-4" />
        </div>
        <div class="w-full px-4">
            <label class="font-bold text-base">Local/Setor</label>
            <input id="local" type="text" placeholder="Local/Setor..." class="w-full h-12 text-[18px] border border-gray-300 rounded-lg p-2 mb-4" />
        </div>
        <div class="w-full px-4">
            <label class="font-bold text-base">Solicitante</label>
            <input id="solicitante" type="text" placeholder="Solicitante..." class="w-full h-12 text-[18px] border border-gray-300 rounded-lg p-2 mb-4" />
        </div>
        <div class="w-full px-4">
            <label class="font-bold text-base">Descrição do Serviço</label>
            <textarea id="descricao" placeholder="Descrição do Serviço..." class="w-full h-24 text-[18px] border border-gray-300 rounded-lg p-2 mb-4"></textarea>
        </div>
        <div class="w-full flex flex-row items-center justify-end px-4 pb-4">
            <button type="submit" class="w-full sm:w-auto bg-blue-500 hover:bg-blue-700 duration-200 p-3 rounded-lg text-white font-semibold">GERAR QRCODE</button>
        </div>
    </form>

    <script src="assets/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            // Força o recarregamento da página ao ser exibida
            if (performance.navigation.type === 2) { // 2 indica que a navegação foi por back/forward
               location.reload(true);
            }

            // Limpa o formulário no carregamento da página
            $('#qrForm')[0].reset();

            $('#qrForm').on('submit', function(event) {
                event.preventDefault();

                const formData = {
                    equipamento: $('#equipamento').val(),
                    data: $('#data').val(),
                    local: $('#local').val(),
                    solicitante: $('#solicitante').val(),
                    descricao: $('#descricao').val()
                };

                const jsonString = JSON.stringify(formData);
                const encodedData = btoa(jsonString);
                const urlSafeEncodedData = encodeURIComponent(encodedData);
                window.location.href = `qrcode.html?data=${urlSafeEncodedData}`;
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</body>
</html>
